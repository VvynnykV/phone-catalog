import{b as H,j as e,L as J,r as u,c as I,d as A,g as K,e as q,a as V,u as Y,f as Z}from"./index-Dg1FrSmq.js";import{P as ee}from"./ProductList-Ba_-xTY3.js";import{c as se,B as Q}from"./Breadcrumbs-B7HFuPpa.js";import{P as te}from"./ProductCardSkeleton-D5i4UtnN.js";import"./ProductCard-BmhxYZ-K.js";import"./index-BHsqwR0Y.js";const ne="_dark_1pvvi_66",ae="_light_1pvvi_78",re="_fadeEffect_1pvvi_107",oe="_fadeEffectActive_1pvvi_114",ce="_content_1pvvi_174",ie="_breadcrumbs_1pvvi_183",le="_pageTitle_1pvvi_192",de="_productsAmount_1pvvi_202",pe="_controlsWrapper_1pvvi_208",ue="_dropdowns_1pvvi_213",me="_dropdownSort_1pvvi_232",_e="_dropdownPerPage_1pvvi_241",he="_searchWrapper_1pvvi_250",fe="_searchIcon_1pvvi_276",ge="_searchIconLight_1pvvi_286",ve="_searchInput_1pvvi_290",xe="_searchClear_1pvvi_299",je="_errorWrapper_1pvvi_314",be="_errorMessage_1pvvi_320",Ne="_reloadButton_1pvvi_328",ke="_productList_1pvvi_343",o={dark:ne,light:ae,fadeEffect:re,fadeEffectActive:oe,"small-text":"_small-text_1pvvi_167",content:ce,breadcrumbs:ie,pageTitle:le,productsAmount:de,controlsWrapper:pe,dropdowns:ue,dropdownSort:me,dropdownPerPage:_e,searchWrapper:he,searchIcon:fe,searchIconLight:ge,searchInput:ve,searchClear:xe,errorWrapper:je,errorMessage:be,reloadButton:Ne,productList:ke};var E=(s=>(s.Newest="Newest",s.Alphabetically="Alphabetically",s.Cheapest="Cheapest",s))(E||{});function Le(s,t,a){let r=s;return a&&(r=s.filter(n=>n.name.toLowerCase().includes(a.trim().toLowerCase()))),r.toSorted((n,i)=>{switch(t){case E.Newest:return i.year-n.year;case E.Cheapest:return n.price-i.price;case E.Alphabetically:return n.name.localeCompare(i.name);default:return 0}})}const ye="_dark_1o74v_66",Pe="_light_1o74v_78",Te="_fadeEffect_1o74v_107",we="_fadeEffectActive_1o74v_114",Ae="_label_1o74v_167",Ie="_content_1o74v_174",Ee="_button_1o74v_184",Ce="_buttonText_1o74v_202",Se="_buttonIcon_1o74v_206",$e="_buttonIconOpen_1o74v_214",Me="_list_1o74v_218",Oe="_listOpen_1o74v_232",We="_listLink_1o74v_239",b={dark:ye,light:Pe,fadeEffect:Te,fadeEffectActive:we,"small-text":"_small-text_1o74v_167",label:Ae,content:Ie,button:Ee,buttonText:Ce,buttonIcon:Se,buttonIconOpen:$e,list:Me,listOpen:Oe,listLink:We};function B(s,t){const a=new URLSearchParams(t);return Object.entries(s).forEach(([r,n])=>{n===null?a.delete(r):Array.isArray(n)?(a.delete(r),n.forEach(i=>{a.append(r,i)})):a.set(r,n.toString())}),a.toString()}const y=({children:s,paramsToUpdate:t,...a})=>{const[r]=H();return e.jsx(J,{to:{search:B(t,r)},...a,children:s})},U=u.memo(({label:s,value:t,options:a,paramsToUpdate:r})=>{const[n,i]=u.useState(!1),d=u.useRef(null);return u.useEffect(()=>{const c=m=>{d.current&&!d.current.contains(m.target)&&i(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]),e.jsxs("div",{ref:d,className:b.content,children:[e.jsx("span",{className:b.label,children:s}),e.jsxs("button",{type:"button",onClick:()=>i(c=>!c),className:b.button,children:[e.jsx("span",{className:b.buttonText,children:t}),e.jsx("span",{className:I(b.buttonIcon,{[b.buttonIconOpen]:n})})]}),e.jsx("ul",{className:I(b.list,{[b.listOpen]:n}),children:a.map(c=>e.jsx("li",{className:b.listItem,children:e.jsx(y,{onClick:()=>i(!1),paramsToUpdate:r(c),className:b.listLink,children:c})},c))})]})});var P=(s=>(s.All="All",s.Four="4",s.Eight="8",s.Sixteen="16",s))(P||{});const qe="_dark_1qi51_66",Ue="_light_1qi51_78",Be="_fadeEffect_1qi51_107",De="_fadeEffectActive_1qi51_114",Fe="_content_1qi51_174",Re="_iconLink_1qi51_188",Ge="_icon_1qi51_188",Qe="_iconNext_1qi51_198",Xe="_iconPrev_1qi51_198",ze="_iconLinkDisabled_1qi51_213",He="_pagesNums_1qi51_227",Je="_pageNumLink_1qi51_237",Ke="_pageNumLinkActive_1qi51_256",p={dark:qe,light:Ue,fadeEffect:Be,fadeEffectActive:De,"small-text":"_small-text_1qi51_167",content:Fe,iconLink:Re,icon:Ge,iconNext:Qe,iconPrev:Xe,iconLinkDisabled:ze,pagesNums:He,pageNumLink:Je,pageNumLinkActive:Ke};function Ve(s,t){const a=[];for(let r=s;r<=t;r++)a.push(r);return a}const Ye=(s,t,a)=>{const r=Math.floor(a/2);let n=Math.max(1,s-r),i=n+a-1;return i>t&&(i=t,n=Math.max(1,i-a+1)),Ve(n,i)},F=4,Ze=u.memo(({currentPage:s,totalPages:t})=>{const r=t,n=u.useMemo(()=>Ye(s,t,F),[s,t]),i=u.useMemo(()=>n[0]>2,[n]),d=u.useMemo(()=>n[n.length-1]<r-1,[n,r]),c=s===1,m=s===r,g=u.useMemo(()=>Math.max(n[0]-F,1),[n]),h=u.useMemo(()=>Math.min(n[n.length-1]+F,t),[n,t]);return e.jsxs("div",{className:p.content,children:[e.jsx(y,{paramsToUpdate:{page:s-1},className:I(p.iconLink,{[p.iconLinkDisabled]:c}),onClick:_=>{c?_.preventDefault():A()},children:e.jsx("span",{className:p.iconPrev})}),e.jsxs("ul",{className:p.pagesNums,children:[n[0]>1&&e.jsx("li",{className:p.pageNum,children:e.jsx(y,{paramsToUpdate:{page:1},className:p.pageNumLink,onClick:A,children:1})}),i&&e.jsx("li",{className:p.ellipsis,children:e.jsx(y,{paramsToUpdate:{page:g},className:p.pageNumLink,onClick:A,children:"..."})}),n.map(_=>e.jsx("li",{className:p.pageNum,children:e.jsx(y,{paramsToUpdate:{page:_},className:I(p.pageNumLink,{[p.pageNumLinkActive]:_===s}),onClick:A,children:_})},_)),d&&e.jsx("li",{className:p.ellipsis,children:e.jsx(y,{paramsToUpdate:{page:h},className:p.pageNumLink,onClick:A,children:"..."})}),n[n.length-1]<r&&e.jsx("li",{className:p.pageNum,children:e.jsx(y,{paramsToUpdate:{page:r},className:p.pageNumLink,onClick:A,children:r})})]}),e.jsx(y,{paramsToUpdate:{page:s+1},className:I(p.iconLink,{[p.iconLinkDisabled]:m}),onClick:_=>m?_.preventDefault():A(),children:e.jsx("span",{className:p.iconNext})})]})}),es="_container_1nfhy_12",ss="_breadcrumbs_1nfhy_16",ts="_pageTitle_1nfhy_17",ns="_productsAmount_1nfhy_18",as="_dropdownSort_1nfhy_19",rs="_dropdownPerPage_1nfhy_20",os="_pagination_1nfhy_21",cs="_pulse_1nfhy_1",is="_dropdowns_1nfhy_45",ls="_productList_1nfhy_57",N={container:es,breadcrumbs:ss,pageTitle:ts,productsAmount:ns,dropdownSort:as,dropdownPerPage:rs,pagination:os,pulse:cs,dropdowns:is,productList:ls},ds=()=>e.jsxs("div",{className:N.container,children:[e.jsx("div",{className:N.breadcrumbs}),e.jsx("div",{className:N.pageTitle}),e.jsx("div",{className:N.productsAmount}),e.jsxs("div",{className:N.dropdowns,children:[e.jsx("div",{className:N.dropdownSort}),e.jsx("div",{className:N.dropdownPerPage})]}),e.jsx("ul",{className:N.productList,children:Array.from({length:10}).map((s,t)=>e.jsx("li",{className:N.productCard,children:e.jsx(te,{})},t))}),e.jsx("div",{className:N.pagination})]});var ps="Expected a function",X=NaN,us="[object Symbol]",ms=/^\s+|\s+$/g,_s=/^[-+]0x[0-9a-f]+$/i,hs=/^0b[01]+$/i,fs=/^0o[0-7]+$/i,gs=parseInt,vs=typeof q=="object"&&q&&q.Object===Object&&q,xs=typeof self=="object"&&self&&self.Object===Object&&self,js=vs||xs||Function("return this")(),bs=Object.prototype,Ns=bs.toString,ks=Math.max,Ls=Math.min,R=function(){return js.Date.now()};function ys(s,t,a){var r,n,i,d,c,m,g=0,h=!1,_=!1,x=!0;if(typeof s!="function")throw new TypeError(ps);t=z(t)||0,G(a)&&(h=!!a.leading,_="maxWait"in a,i=_?ks(z(a.maxWait)||0,t):i,x="trailing"in a?!!a.trailing:x);function T(l){var v=r,k=n;return r=n=void 0,g=l,d=s.apply(k,v),d}function M(l){return g=l,c=setTimeout(C,t),h?T(l):d}function O(l){var v=l-m,k=l-g,w=t-v;return _?Ls(w,i-k):w}function $(l){var v=l-m,k=l-g;return m===void 0||v>=t||v<0||_&&k>=i}function C(){var l=R();if($(l))return L(l);c=setTimeout(C,O(l))}function L(l){return c=void 0,x&&r?T(l):(r=n=void 0,d)}function W(){c!==void 0&&clearTimeout(c),g=0,r=m=n=c=void 0}function S(){return c===void 0?d:L(R())}function j(){var l=R(),v=$(l);if(r=arguments,n=this,m=l,v){if(c===void 0)return M(m);if(_)return c=setTimeout(C,t),T(m)}return c===void 0&&(c=setTimeout(C,t)),d}return j.cancel=W,j.flush=S,j}function G(s){var t=typeof s;return!!s&&(t=="object"||t=="function")}function Ps(s){return!!s&&typeof s=="object"}function Ts(s){return typeof s=="symbol"||Ps(s)&&Ns.call(s)==us}function z(s){if(typeof s=="number")return s;if(Ts(s))return X;if(G(s)){var t=typeof s.valueOf=="function"?s.valueOf():s;s=G(t)?t+"":t}if(typeof s!="string")return s===0?s:+s;s=s.replace(ms,"");var a=hs.test(s);return a||fs.test(s)?gs(s.slice(2),a?2:8):_s.test(s)?X:+s}var ws=ys;const As=K(ws),Os=()=>{const{products:s,isLoading:t,errorMessage:a,fetchProducts:r,theme:n}=V(),{t:i}=Y(),[d,c]=H(),m=d.get("query")||"",g=d.get("sort")||E.Newest,h=d.get("perPage")||P.All,_=+(d.get("page")||1),[x,T]=u.useState(m);u.useEffect(()=>{T(m)},[m]);const M=u.useMemo(()=>As(f=>{c(B({query:f||null},d))},1e3),[c,d]),O=u.useCallback(f=>{const D=f.target.value;if(T(D),D===""){c(B({query:null},d));return}M(D)},[M,d,c]),$=u.useCallback(()=>{T(""),c(B({query:null},d))},[d,c]),{pathname:C}=Z(),L=C.split("/")[1],W=se(L),S=u.useMemo(()=>s.filter(f=>f.category===L),[L,s]),j=u.useMemo(()=>Le(S,g,m),[S,g,m]),l=h===P.All?j.length:Number(h),v=u.useMemo(()=>h===P.All?1:Math.ceil(j.length/l),[j.length,h,l]),k=(_-1)*l,w=u.useMemo(()=>h===P.All?j:j.slice(k,k+l),[h,l,k,j]);return e.jsxs("div",{className:o.content,children:[t&&e.jsx(ds,{}),!t&&a&&e.jsxs("div",{className:o.errorWrapper,children:[e.jsx("div",{className:o.errorMessage,children:a}),e.jsx("button",{onClick:r,className:o.reloadButton,disabled:t,children:"Try reload"})]}),!t&&!a&&x&&w.length===0&&e.jsxs(e.Fragment,{children:[e.jsxs(e.Fragment,{children:[e.jsx("div",{className:o.breadcrumbs,children:e.jsx(Q,{})}),e.jsx("h1",{className:o.pageTitle,children:W}),e.jsx("div",{className:o.productsAmount,children:`${S.length} ${i("models")}`}),e.jsxs("div",{className:o.controlsWrapper,children:[e.jsxs("div",{className:o.dropdowns,children:[e.jsx("div",{className:o.dropdownSort,children:e.jsx(U,{label:i("dropdownLabel.sort"),value:g,options:Object.values(E),paramsToUpdate:f=>({sort:f})})}),e.jsx("div",{className:o.dropdownPerPage,children:e.jsx(U,{label:i("dropdownLabel.items"),value:h,options:Object.values(P),paramsToUpdate:f=>({perPage:f})})})]}),e.jsxs("div",{className:o.searchWrapper,children:[e.jsx("span",{className:I(o.searchIcon,{[o.searchIconLight]:n==="light"})}),e.jsx("input",{type:"text",name:"search",value:x,className:o.searchInput,onChange:O,placeholder:"Search products..."}),x&&e.jsx("button",{className:o.searchClear,onClick:$,"aria-label":"Clear search"})]})]})]}),e.jsx("div",{className:o.errorWrapper,children:e.jsx("div",{className:o.errorMessage,children:`There are no ${L} matching the query`})})]}),!t&&!a&&!x&&w.length===0&&e.jsx("div",{className:o.errorWrapper,children:e.jsx("div",{className:o.errorMessage,children:`There are no ${L} yet`})}),!t&&!a&&w.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:o.breadcrumbs,children:e.jsx(Q,{})}),e.jsx("h1",{className:o.pageTitle,children:W}),e.jsx("div",{className:o.productsAmount,children:`${S.length} ${i("models")}`}),e.jsxs("div",{className:o.controlsWrapper,children:[e.jsxs("div",{className:o.dropdowns,children:[e.jsx("div",{className:o.dropdownSort,children:e.jsx(U,{label:i("dropdownLabel.sort"),value:g,options:Object.values(E),paramsToUpdate:f=>({sort:f})})}),e.jsx("div",{className:o.dropdownPerPage,children:e.jsx(U,{label:i("dropdownLabel.items"),value:h,options:Object.values(P),paramsToUpdate:f=>({perPage:f})})})]}),e.jsxs("div",{className:o.searchWrapper,children:[e.jsx("span",{className:I(o.searchIcon,{[o.searchIconLight]:n==="light"})}),e.jsx("input",{type:"text",name:"search",value:x,className:o.searchInput,onChange:O,placeholder:"Search products..."}),x&&e.jsx("button",{className:o.searchClear,onClick:$,"aria-label":"Clear search"})]})]}),e.jsx("div",{className:o.productList,children:e.jsx(ee,{products:w})}),h!==P.All&&v>1&&e.jsx(Ze,{currentPage:_,totalPages:v})]})]})};export{Os as ProductPage};
